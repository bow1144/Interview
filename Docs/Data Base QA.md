### 排他锁和共享锁是什么，有什么区别？
* 排他锁是写锁，锁定时不允许其它事务读写；共享锁是读锁，锁定之后也可以被其它事务读取
* 换句话说，排他锁是独占的，一次只能由一个事务持有，二共享锁允许多个事务同时持有资源

### MySQL的行级锁有哪些，有什么作用？
* 包括`Record Lock`记录锁、`Gap Lock`间隙锁、`Next-key Lock`临键锁
* 记录锁包括排他锁和共享锁，仅把一条记录锁上
* 间隙锁锁定一个范围，只存在于**可重复读**、作用是防止幻读
* 临键锁是以上两种的组合，作用是**保护记录、阻止新纪录被插入间隙**

### 数据库的悲观锁、乐观锁的使用场景有哪些？
* 乐观锁认为并发冲突是小概率事件，不用每次都对数据上锁；适用于**读多写少**的程序
* 悲观锁通过锁机制，对数据修改采取保守态度，适用于**写操作多**的程序

### 执行SELECT语句后发生了什么？
1. **连接器**：与客户端连接，获取权限
2. **查询缓存**：如果命中缓存直接返回结果
3. **解析SQL**：通过解析器对语法、词法解析，构建语法树
4. **执行SQL**
   - 预处理：检查字段是否存在、将`*`扩展为所有的列
   - 优化：选择查询成本最小的执行计划
   - 执行：从存储引擎读取数据，返回客户端
  
### 【重要】事务的四大特性有哪些？
事务的四大特性是ACID

* 原子性：事务的所有操作要么全部成功，要么全部失败回滚
* 一致性：事务执行前后，数据库都是一致性状态（有效状态）
* 隔离性：多个事务并发执行时，每个事务被隔离，一个事务的执行不影响其它事务
* 持久性：一旦事务提交，永久改变，即使系统崩溃也保持

### 【重要】数据库的事务隔离级别有哪些？
数据库的事务隔离级别包括四个：读未提交、读已提交、可重复读、序列化

* 读未提交：最低隔离，允许事务读取另一事务尚未提交的数据修改
* 读已提交：解决**脏读**、只能读取别的事务已提交的数据
* 可重复读：事务之间多次读取数据会得到相同结果，解决了不可重复读的问题
* 序列化：串行执行，解决所有问题

### 为什么MySQL索引使用B+Tree？
* 相比于红黑树，B+Tree是多叉树，树高更矮
* 有大量冗余节点，使得B+Tree的插入删除效率更高
* 叶子节点用链表连接，范围查询效率高

### 介绍关系范式？
关系范式是一种规范化设计方法，可以减少冗余提升效率

* 第一范式：每个属性值都是最小单元，保证每列的原子性
* 第二范式：主键外其它列全部依赖于主键
* 第三范式：每列都与主键直接相关

### 可以对数据库表做哪些优化？
1. 合理分表，方便管理数据
2. 建立索引：提高查询性能
3. 避免使用`SELECT *`
4. 使用合适的数据类型

### 了解MongoDB吗，和MySQL有哪些区别？
* MongoDB是一种非关系型、无模式数据库，以类似`json`的形式存储
* 提供高性能的读写能力和压缩特性，适用于大量非/半结构化数据
* 具有良好的横向扩展性，通过分片在多台3机器上分布数据

### 【重要】什么是慢查询？原因是什么？可以怎么优化？
* 数据库查询的时间超过指定（10s）时间
* 原因：
  - 查询语句复杂、插叙数据量大
  - 缺少索引、数据库设计不合理
  - 并发冲突
  - 硬件资源不足
* 解决：
  - 优化语句
  - `explain`：更好选择索引
  - `order by limit`，让排序的表先查
  - 建立索引

### 什么是Redis？有什么特点？
Redis是一种基于内存的数据库，读写速度快，通常用作缓存、消息队列、分布式锁等；提供了五种数据结构和分布式特性，可将数据分布在多个节点上

### Redis为什么快？
* 基于内存操作：减少了IO
* 高效的数据结构，提升读写效率
* 单线程，避免上下文切换开销
* IO多路复用，处理器与Socket一一对应

### 为什么Redis是单线程？
Redis的瓶颈不在CPU而在内存和带宽，而单线程容易实现，自然使用单线程

### 为什么Redis又要引入多线程呢？
后来发现内存也不是瓶颈，瓶颈在于网络IO，故用多线程处理网络IO

### Redis有哪些数据类型？分别有哪些应用场景？
* `String`：缓存对象，计数器，分布式锁
* `List`：消息队列
* `Hash`：缓存对象、购物车
* `Set`：聚合计算
* `Zset`：排行榜等

### Redis底层使用了什么数据结构？
